(function(){function e(e){e&&(t.html(e).css({opacity:"1",top:"0px"}),setTimeout(function(){t.css({opacity:"0",top:"-38px"})},1e3))}chrome.tabs.getCurrent(function(e){chrome.tabs.getZoomSettings(e.id,function(t){"disabled"!==t.mode&&(chrome.tabs.setZoom(1),chrome.tabs.setZoomSettings(e.id,{mode:"disabled"},function(){}))})}),$("body").attr("data-lan",chrome.i18n.getMessage("@@ui_locale")),document.title=chrome.i18n.getMessage("optionName")+" - "+chrome.i18n.getMessage("extName"),$("#showCols").html(chrome.i18n.getMessage("showCols")),$("#iconSize").html(chrome.i18n.getMessage("iconSize")),$("#speedManageName").html(chrome.i18n.getMessage("speedManageName")),$("#speedManageDesc").html(chrome.i18n.getMessage("speedManageDesc")),$("#speedManageLock").html(chrome.i18n.getMessage("speedManageLock")),$("#rankName").html(chrome.i18n.getMessage("rankName")),$("#rankDesc").html(chrome.i18n.getMessage("rankDesc")),$("#rankBtn").html(chrome.i18n.getMessage("rankBtn")),$("#uninstallName").html(chrome.i18n.getMessage("uninstallName")),$("#uninstallDesc").html(chrome.i18n.getMessage("uninstallDesc")),$("#otherName").html(chrome.i18n.getMessage("otherName")),$("#otherDesc").html(chrome.i18n.getMessage("otherDesc")),$("#showBadgeName").html(chrome.i18n.getMessage("showBadgeName")),$("#showBadgeDesc").html(chrome.i18n.getMessage("showBadgeDesc")),$("#showExtName").html(chrome.i18n.getMessage("showExtName")),$("#showExtNameDesc").html(chrome.i18n.getMessage("showExtNameDesc")),$("#rightMoreName").html(chrome.i18n.getMessage("rightMoreName")),$("#rightMoreDesc").html(chrome.i18n.getMessage("rightMoreDesc")),$("#js-icon-size-show").html(chrome.i18n.getMessage("sizeNormal"));var t=$("#_TOOLS_STATUS__");window.SubTask("Storage",function(t){function s(s){t.set(setColumnKey,s),a.html(s),i&&(clearTimeout(i),i=null),i=setTimeout(function(){e(chrome.i18n.getMessage("tipSetSuc"))},600)}function o(s){t.set(g,s),l.html(m[s]),h&&(clearTimeout(h),h=null),h=setTimeout(function(){e(chrome.i18n.getMessage("tipSetSuc"))},600)}var i=null,a=$("#js-sel-column-show"),c=$("#js-sel-column");setColumnKey="_showColumn_",c.on("input chnage",function(){s($(this).val())});var n=t.get(setColumnKey);n&&((n<4||n>9)&&(n=7,t.set(setColumnKey,7)),c.val(n),a.html(n));var h=null,l=$("#js-icon-size-show"),r=$("#js-icon-size"),m={1:chrome.i18n.getMessage("sizeSmall"),2:chrome.i18n.getMessage("sizeNormal"),3:chrome.i18n.getMessage("sizeBig")},g="_showIconSize_";r.on("input chnage",function(){o($(this).val())});var d=t.get(g);d&&(r.val(d),l.html(m[d])),$(".js-clear-rank").click(function(){t.remove("_rankList_"),e(chrome.i18n.getMessage("tipResetRank"))}),$("[data-switch-id]").each(function(){var e=$(this),s=e.data("switch-id"),o="_switch_"+s+"_";"close"===t.get(o)&&e.closest(".list").addClass("switch-btn-close")}),$(".switch-btn").click(function(){var s=$(this),o=s.closest(".list"),i="_switch_"+s.data("switch-id")+"_";o.toggleClass("switch-btn-close"),e(chrome.i18n.getMessage("tipSetSuc")),o.hasClass("switch-btn-close")?t.set(i,"close"):t.remove(i)}),window.SubTask("Extension",function(e){for(var s=[],o=t.get("_lockList_"),i=0;i<e.length;i++){var a=e[i];if(a.id!==chrome.app.getDetails().id&&"theme"!==a.type){var c="";a.icons&&(c=a.icons[a.icons.length-1].url);var n="";o&&"1"==o[a.id]&&(n="locked");var h='<li data-id="'+a.id+'" title="'+a.name+'" '+n+'><img src="'+c+'" alt="'+a.name+'"></li>';s.push(h)}}$("#_PLUGINS_LIST_").html(s.join(""))}),$("#_PLUGINS_LIST_").on("click","li",function(){var e=$(this),s=e.data("id"),o=t.get("_lockList_")||{};void 0===e.attr("locked")?(e.attr("locked",""),o[s]="1"):(e.removeAttr("locked"),delete o[s]),t.set("_lockList_",o)});var u=t.get("_rightClick_")||"uninstall";$("#js-rightclick").val(u).change(function(){var s=$(this).val();t.set("_rightClick_",s),e(chrome.i18n.getMessage("tipSetSuc"))}),$('[data-switch-id="show_badge"]').click(function(){setTimeout(function(){if("close"===t.get("_switch_show_badge_"))chrome.browserAction.setBadgeText({text:""});else try{var e=0;chrome.management.getAll(function(s){for(var o=0;o<s.length;o++){var i=s[o];i.id!==chrome.app.getDetails().id&&"theme"!==i.type&&i.enabled&&"1"!==t.get("_lockList_")[i.id]&&e++}0===e?chrome.browserAction.setBadgeText({text:""}):(chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"}),chrome.browserAction.setBadgeText({text:e+""}))})}catch(e){}},100)});var _=$("#playDemo"),w=0;_.click(function(){var e=$(this),t={0:{width:200,src:"icon/play-demo.png"},1:{width:600,src:"http://7lrypv.com1.z0.glb.clouddn.com/2017-03-07%2020_36_26.gif"}},s=0===w?1:0;e.css("width",t[s].width).attr("src",t[s].src),w=s})})})();