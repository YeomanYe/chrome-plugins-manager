(function(){document.title=chrome.i18n.getMessage("extName");var e=$("#showList");var c=$("#hideList");var b=$("#wrap");var f=localStorage.getItem("_switch_show_extname_")!=="close";
var o={3:228,4:304,5:380,6:456,7:532,8:608,9:684};b.width(o[localStorage.getItem("_showColumn_")]);var k=localStorage.getItem("_showIconSize_")||2;b.addClass("icon-size-"+k);
function d(){var p=j();chrome.management.getAll(function(x){var q=[];var y=[];var r=[];for(var t=0;t<x.length;t++){var s=x[t];if(s.id===chrome.app.getDetails().id||s.type==="theme"){continue;
}var u="";if(s.icons){u=s.icons[s.icons.length-1].url;}var v="";if(p&&p[s.id]==1){v="locked";}var w='<li data-id="'+s.id+'" data-optionurl="'+s.optionsUrl+'" data-name="'+s.shortName+'" style="background-image:url('+u+')" '+v+"></li>";
if(f){(function(A,B){setTimeout(function(){n(A,B.id);},0);})(s.icons[0].url,s);}if(s.enabled===false){r.push(w);}else{if(v==="locked"){y.unshift(w);}else{q.push(w);
}}}if(!localStorage.getItem("_switch_rank_sort_")){q.sort(function(A,B){return m.get($(B).data("id"))-m.get($(A).data("id"));});r.sort(function(A,B){return m.get($(B).data("id"))-m.get($(A).data("id"));
});}var z=y.concat(q);e.html(z.join(""));if(r.length===0){e.addClass("hideListIsNull");if(z.length===0){b.addClass("allListIsEmpty");}}c.html(r.join(""));
setTimeout(function(){$("body").css("background-color","#fff");b.height(b.height()+1);},200);a();});}d();function a(){if(!localStorage.getItem("_switch_show_badge_")){var q=j();
var p=0;$("#showList li").each(function(r,s){var t=$(s).data("id");if(q[t]!=="1"){p++;}});if(p===0){chrome.browserAction.setBadgeText({text:""});}else{chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"});
chrome.browserAction.setBadgeText({text:p+""});}}}var m={_key:"_rankList_",_getLocalStorage:function(){var q=localStorage.getItem(this._key),p=null;if(q){p=JSON.parse(q);
return p;}else{return{};}},_setLocalStorage:function(p){localStorage.setItem(this._key,JSON.stringify(p));},get:function(q){var p=this._getLocalStorage();
if(p&&p[q]){return parseInt(p[q]);}else{return 0;}},setRank:function(r){var p=this._getLocalStorage();if(p){var q=p[r];if(q){p[r]=parseInt(p[r])+1;}else{p[r]=1;
}this._setLocalStorage(p);}}};b.on("click","li",function(){var q=$(this),r=q.data("id"),p=q.closest("#hideList").length===1;if(r){if(p){e.append(q);m.setRank(r);
}else{c.append(q);}if(c.find("li").length===0){e.addClass("hideListIsNull");}else{e.removeClass("hideListIsNull");}chrome.management.setEnabled(r,p,function(){});
}a();});var g=$("#extName");var h={"1":14,"2":18,"3":24};b.on("mouseenter","li",function(){var s=$(this);if(f){var q=s.offset();var r=q.left+50-10;var u=r+h[k];
var p=g.html(s.attr("data-name")).outerWidth();if($("body").width()<p+u){r=q.left-p+10;u=r-h[k];}if(l[s.attr("data-id")]){g.css("background-color",l[s.attr("data-id")].color);
}g.css({top:q.top+15,left:r});}var v=s.closest(".list");clearTimeout(window["timer_disable_dinginess_"+v.attr("id")]);window["timer_"+s.data("id")]=setTimeout(function(){s.addClass("hover");
if(f){v.addClass("dinginess");g.addClass("extName-anim").css({left:u,opacity:1});}},100);}).on("mouseleave","li",function(){var p=$(this),q=p.closest(".list");
if(f){window["timer_disable_dinginess_"+q.attr("id")]=setTimeout(function(){q.removeClass("dinginess");},300);g.removeClass("extName-anim").attr("style","").empty();
}p.removeClass("hover");clearTimeout(window["timer_"+p.data("id")]);});function j(){var p=localStorage.getItem("_lockList_");if(p){return JSON.parse(p);
}else{return null;}}$("body").on("dblclick",function(){var p=e.find("li");p.each(function(q,s){var r=$(s);var u=r.data("id");if(r.attr("locked")===""){return;
}c.append(r);chrome.management.setEnabled(u,false,function(){});});chrome.browserAction.setBadgeText({text:""});});if(!localStorage.getItem("_switch_right_click_")){var i=localStorage.getItem("_rightClick_")||"uninstall";
$(document).on("mousedown","#hideList>li, #showList>li",function(q){if(q.button===2){if(i=="uninstall"){chrome.management.uninstall($(this).data("id"),function(){d();
});}else{if(i=="lock"){}else{if(i=="option"){var p=$(this).data("optionurl");if(p){window.open(p);}}}}}});}$(document).on("contextmenu",function(p){return false;
});var l={};function n(s,q){function r(B){var w=document.getElementById("getColorByCanvas");w.width=B.width;w.height=B.height;var v=w.getContext("2d");
v.drawImage(B,0,0);var A=v.getImageData(0,0,B.width,B.height).data;var u=0;var C=0;var E=0;var z=180;var G=1000;for(var H=0;H<B.height;H++){for(var y=0;
y<B.width;y++){var x=A[((B.width*H)+y)*4];var t=A[((B.width*H)+y)*4+1];var F=A[((B.width*H)+y)*4+2];if(x!=255&&t!=255&&F!=255){if(y<G){G=y;}}if(!(x>z&&t>z&&F>z)){u+=x;
C+=t;E+=F;}}}u/=(B.width*B.height);C/=(B.width*B.height);E/=(B.width*B.height);u=Math.round(u);C=Math.round(C);E=Math.round(E);var D="rgb("+u+","+C+","+E+")";
if(u>z&&C>z&&E>z){D="#5c5e6f";}if(G===1000){setTimeout(function(){$("[data-id="+q+"]").addClass("noicon");},0);}return{color:D,substantial:G};}var p=new Image();
p.crossOrigin="Anonymous";p.src=s;p.onload=function(){var t=r(p);l[q]=t;};}})();