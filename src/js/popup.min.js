(function(){document.title=chrome.i18n.getMessage("extName");var e=$("#showList");var c=$("#hideList");var b=$("#wrap");var f=localStorage.getItem("_switch_show_extname_")!=="close";
var n={3:228,4:304,5:380,6:456,7:532,8:608,9:684};b.width(n[localStorage.getItem("_showColumn_")]);var k=localStorage.getItem("_showIconSize_")||2;b.addClass("icon-size-"+k);
function d(){var o=j();chrome.management.getAll(function(w){var p=[];var x=[];var q=[];for(var s=0;s<w.length;s++){var r=w[s];if(r.id===chrome.app.getDetails().id||r.type==="theme"){continue;
}var t="";if(r.icons){t=r.icons[r.icons.length-1].url;}var u="";if(o&&o[r.id]==1){u="locked";}var v='<li data-id="'+r.id+'" data-optionurl="'+r.optionsUrl+'" data-name="'+r.shortName+'" style="background-image:url('+t+')" '+u+"></li>";
if(f){(function(z,A){setTimeout(function(){m(z,A.id);},0);})(r.icons[0].url,r);}if(r.enabled===false){q.push(v);}else{if(u==="locked"){x.unshift(v);}else{p.push(v);
}}}if(!localStorage.getItem("_switch_rank_sort_")){p.sort(function(z,A){return l.get($(A).data("id"))-l.get($(z).data("id"));});q.sort(function(z,A){return l.get($(A).data("id"))-l.get($(z).data("id"));
});}var y=x.concat(p);e.html(y.join(""));if(q.length===0){e.addClass("hideListIsNull");if(y.length===0){b.addClass("allListIsEmpty");}}c.html(q.join(""));
setTimeout(function(){$("body").css("background-color","#fff");b.height(b.height()+1);},200);a();});}d();function a(){if(!localStorage.getItem("_switch_show_badge_")){var p=j();
var o=0;$("#showList li").each(function(q,r){var s=$(r).data("id");if(p[s]!=="1"){o++;}});if(o===0){chrome.browserAction.setBadgeText({text:""});}else{chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"});
chrome.browserAction.setBadgeText({text:o+""});}}}var l={_key:"_rankList_",_getLocalStorage:function(){var p=localStorage.getItem(this._key),o=null;if(p){o=JSON.parse(p);
return o;}else{return{};}},_setLocalStorage:function(o){localStorage.setItem(this._key,JSON.stringify(o));},get:function(p){var o=this._getLocalStorage();
if(o&&o[p]){return parseInt(o[p]);}else{return 0;}},setRank:function(q){var o=this._getLocalStorage();if(o){var p=o[q];if(p){o[q]=parseInt(o[q])+1;}else{o[q]=1;
}this._setLocalStorage(o);}}};b.on("click","li",function(){var p=$(this),q=p.data("id"),o=p.closest("#hideList").length===1;if(q){if(o){e.append(p);l.setRank(q);
}else{c.append(p);}if(c.find("li").length===0){e.addClass("hideListIsNull");}else{e.removeClass("hideListIsNull");}chrome.management.setEnabled(q,o,function(){});
}a();});var g=$("#extName");var h={"1":14,"2":18,"3":24};b.on("mouseenter","li",function(){var r=$(this);if(f){var p=r.offset();var q=p.left+50-10;var s=q+h[k];
var o=g.html(r.attr("data-name")).outerWidth();if($("body").width()<o+s){q=p.left-o+10;s=q-h[k];}if(extColor[r.attr("data-id")]){g.css("background-color",extColor[r.attr("data-id")].color);
}g.css({top:p.top+15,left:q});}var u=r.closest(".list");clearTimeout(window["timer_disable_dinginess_"+u.attr("id")]);window["timer_"+r.data("id")]=setTimeout(function(){r.addClass("hover");
if(f){u.addClass("dinginess");g.addClass("extName-anim").css({left:s,opacity:1});}},100);}).on("mouseleave","li",function(){var o=$(this),p=o.closest(".list");
if(f){window["timer_disable_dinginess_"+p.attr("id")]=setTimeout(function(){p.removeClass("dinginess");},300);g.removeClass("extName-anim").attr("style","").empty();
}o.removeClass("hover");clearTimeout(window["timer_"+o.data("id")]);});function j(){var o=localStorage.getItem("_lockList_");if(o){return JSON.parse(o);
}else{return null;}}$("body").on("dblclick",function(){var o=e.find("li");o.each(function(p,r){var q=$(r);var s=q.data("id");if(q.attr("locked")===""){return;
}c.append(q);chrome.management.setEnabled(s,false,function(){});});chrome.browserAction.setBadgeText({text:""});});if(!localStorage.getItem("_switch_right_click_")){var i=localStorage.getItem("_rightClick_")||"uninstall";
$(document).on("mousedown","#hideList>li, #showList>li",function(p){if(p.button===2){if(i=="uninstall"){chrome.management.uninstall($(this).data("id"),function(){d();
});}else{if(i=="lock"){}else{if(i=="option"){var o=$(this).data("optionurl");if(o){window.open(o);}}}}}});}$(document).on("contextmenu",function(o){return false;
});window.extColor={};window.getColor=function m(r,p){function q(A){var v=document.getElementById("getColorByCanvas");v.width=A.width;v.height=A.height;
var u=v.getContext("2d");u.drawImage(A,0,0);var z=u.getImageData(0,0,A.width,A.height).data;var t=0;var B=0;var D=0;var y=180;var F=1000;for(var G=0;G<A.height;
G++){for(var x=0;x<A.width;x++){var w=z[((A.width*G)+x)*4];var s=z[((A.width*G)+x)*4+1];var E=z[((A.width*G)+x)*4+2];if(w!=255&&s!=255&&E!=255){if(x<F){F=x;
}}if(!(w>y&&s>y&&E>y)){t+=w;B+=s;D+=E;}}}t/=(A.width*A.height);B/=(A.width*A.height);D/=(A.width*A.height);t=Math.round(t);B=Math.round(B);D=Math.round(D);
var C="rgb("+t+","+B+","+D+")";if(t>y&&B>y&&D>y){C="#5c5e6f";}if(F===1000){setTimeout(function(){$("[data-id="+p+"]").addClass("noicon");},0);}return{color:C,substantial:F};
}var o=new Image();o.crossOrigin="Anonymous";o.src=r;o.onload=function(){var s=q(o);extColor[p]=s;};};})();