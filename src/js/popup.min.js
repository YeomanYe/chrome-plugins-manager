(function(){document.title=chrome.i18n.getMessage("extName");var e=$("#showList");var c=$("#hideList");var b=$("#wrap");var j={3:228,4:304,5:380,6:456,7:532,8:608,9:684};
b.width(j[localStorage.getItem("_showColumn_")]);var h=localStorage.getItem("_showIconSize_")||2;b.addClass("icon-size-"+h);function d(){chrome.management.getAll(function(o){var q=[];
var k=[];for(var n=0;n<o.length;n++){var p=o[n];if(p.id===chrome.app.getDetails().id||p.type==="theme"){continue;}var m="";if(p.icons){m=p.icons[p.icons.length-1].url;
}var l='<li data-id="'+p.id+'" title="'+p.name+'" data-optionurl="'+p.optionsUrl+'" alt="'+p.name+'" style="background-image:url('+m+')"></li>';if(p.enabled===false){k.push(l);
}else{q.push(l);}}if(!localStorage.getItem("_switch_rank_sort_")){q.sort(function(r,s){return i.get($(s).data("id"))-i.get($(r).data("id"));});k.sort(function(r,s){return i.get($(s).data("id"))-i.get($(r).data("id"));
});}e.html(q.join(""));if(k.length===0){e.addClass("hideListIsNull");if(q.length===0){b.addClass("allListIsEmpty");}}c.html(k.join(""));a();});}d();function a(){if(!localStorage.getItem("_switch_show_badge_")){var l=g();
var k=0;$("#showList li").each(function(m,n){var o=$(n).data("id");if(l[o]!=="1"){k++;}});if(k===0){chrome.browserAction.setBadgeText({text:""});}else{chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"});
chrome.browserAction.setBadgeText({text:k+""});}}}var i={_key:"_rankList_",_getLocalStorage:function(){var l=localStorage.getItem(this._key),k=null;if(l){k=JSON.parse(l);
return k;}else{return{};}},_setLocalStorage:function(k){localStorage.setItem(this._key,JSON.stringify(k));},get:function(l){var k=this._getLocalStorage();
if(k&&k[l]){return parseInt(k[l]);}else{return 0;}},setRank:function(m){var k=this._getLocalStorage();if(k){var l=k[m];if(l){k[m]=parseInt(k[m])+1;}else{k[m]=1;
}this._setLocalStorage(k);}}};b.on("click","li",function(){var l=$(this),m=l.data("id"),k=l.closest("#hideList").length===1;if(m){if(k){e.append(l);i.setRank(m);
}else{c.append(l);}if(c.find("li").length===0){e.addClass("hideListIsNull");}else{e.removeClass("hideListIsNull");}chrome.management.setEnabled(m,k,function(){});
}a();});b.on("mouseenter","li",function(){var k=$(this);window["timer_"+k.data("id")]=setTimeout(function(){k.addClass("hover");},100);}).on("mouseleave","li",function(){var k=$(this);
k.removeClass("hover");clearTimeout(window["timer_"+k.data("id")]);});function g(){var k=localStorage.getItem("_lockList_");if(k){return JSON.parse(k);
}else{return null;}}$("body").on("dblclick",function(){var k=g();var l=e.find("li");l.each(function(m,o){var n=$(o);var p=n.data("id");if(k&&k[p]==1){n.attr("locked","");
return;}c.append(n);chrome.management.setEnabled(p,false,function(){});});setTimeout(function(){e.attr("locked","");setTimeout(function(){e.removeAttr("locked");
},800);},0);chrome.browserAction.setBadgeText({text:""});});if(!localStorage.getItem("_switch_right_click_")){var f=localStorage.getItem("_rightClick_")||"uninstall";
$(document).on("mousedown","#hideList>li, #showList>li",function(l){if(l.button===2){if(f=="uninstall"){chrome.management.uninstall($(this).data("id"),function(){d();
});}else{if(f=="lock"){}else{if(f=="option"){var k=$(this).data("optionurl");if(k){window.open(k);}}}}}});}$(document).on("contextmenu",function(k){return false;
});})();