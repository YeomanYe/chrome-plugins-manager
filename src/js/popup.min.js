(function(){document.title=chrome.i18n.getMessage("extName");var e=$("#showList");var c=$("#hideList");var b=$("#wrap");var m={3:228,4:304,5:380,6:456,7:532,8:608,9:684};
b.width(m[localStorage.getItem("_showColumn_")]);var k=localStorage.getItem("_showIconSize_")||2;b.addClass("icon-size-"+k);function d(){var n=j();chrome.management.getAll(function(v){var o=[];
var w=[];var p=[];for(var r=0;r<v.length;r++){var q=v[r];if(q.id===chrome.app.getDetails().id||q.type==="theme"){continue;}var s="";if(q.icons){s=q.icons[q.icons.length-1].url;
}var t="";if(n&&n[q.id]==1){t="locked";}var u='<li data-id="'+q.id+'" data-optionurl="'+q.optionsUrl+'" data-name="'+q.shortName+'" style="background-image:url('+s+')" '+t+"></li>";
if(q.enabled===false){p.push(u);}else{if(t==="locked"){w.unshift(u);}else{o.push(u);}}}if(!localStorage.getItem("_switch_rank_sort_")){o.sort(function(y,z){return l.get($(z).data("id"))-l.get($(y).data("id"));
});p.sort(function(y,z){return l.get($(z).data("id"))-l.get($(y).data("id"));});}var x=w.concat(o);e.html(x.join(""));if(p.length===0){e.addClass("hideListIsNull");
if(x.length===0){b.addClass("allListIsEmpty");}}c.html(p.join(""));setTimeout(function(){$("body").css("background","#fff");b.height(b.height()+1);},200);
a();});}d();function a(){if(!localStorage.getItem("_switch_show_badge_")){var o=j();var n=0;$("#showList li").each(function(p,q){var r=$(q).data("id");
if(o[r]!=="1"){n++;}});if(n===0){chrome.browserAction.setBadgeText({text:""});}else{chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"});chrome.browserAction.setBadgeText({text:n+""});
}}}var l={_key:"_rankList_",_getLocalStorage:function(){var o=localStorage.getItem(this._key),n=null;if(o){n=JSON.parse(o);return n;}else{return{};}},_setLocalStorage:function(n){localStorage.setItem(this._key,JSON.stringify(n));
},get:function(o){var n=this._getLocalStorage();if(n&&n[o]){return parseInt(n[o]);}else{return 0;}},setRank:function(p){var n=this._getLocalStorage();if(n){var o=n[p];
if(o){n[p]=parseInt(n[p])+1;}else{n[p]=1;}this._setLocalStorage(n);}}};b.on("click","li",function(){var o=$(this),p=o.data("id"),n=o.closest("#hideList").length===1;
if(p){if(n){e.append(o);l.setRank(p);}else{c.append(o);}if(c.find("li").length===0){e.addClass("hideListIsNull");}else{e.removeClass("hideListIsNull");
}chrome.management.setEnabled(p,n,function(){});}a();});var g=$("#extName");var f=localStorage.getItem("_switch_show_extname_")!=="close";var h={"1":16,"2":20,"3":24};
b.on("mouseenter","li",function(){var q=$(this);if(f){var o=q.offset();var p=o.left+50-10;var r=p+h[k];var n=g.html(q.attr("data-name")).outerWidth();if($("body").width()<n+r){p=o.left-n+10;
r=p-h[k];}g.css({top:o.top+15,left:p});}window["timer_"+q.data("id")]=setTimeout(function(){q.addClass("hover");if(f){g.addClass("extName-anim").css({left:r,opacity:1});
}},100);}).on("mouseleave","li",function(){if(f){g.removeClass("extName-anim").attr("style","").empty();}var n=$(this);n.removeClass("hover");clearTimeout(window["timer_"+n.data("id")]);
});function j(){var n=localStorage.getItem("_lockList_");if(n){return JSON.parse(n);}else{return null;}}$("body").on("dblclick",function(){var n=e.find("li");
n.each(function(o,q){var p=$(q);var r=p.data("id");if(p.attr("locked")===""){return;}c.append(p);chrome.management.setEnabled(r,false,function(){});});
chrome.browserAction.setBadgeText({text:""});});if(!localStorage.getItem("_switch_right_click_")){var i=localStorage.getItem("_rightClick_")||"uninstall";
$(document).on("mousedown","#hideList>li, #showList>li",function(o){if(o.button===2){if(i=="uninstall"){chrome.management.uninstall($(this).data("id"),function(){d();
});}else{if(i=="lock"){}else{if(i=="option"){var n=$(this).data("optionurl");if(n){window.open(n);}}}}}});}$(document).on("contextmenu",function(n){return false;
});})();