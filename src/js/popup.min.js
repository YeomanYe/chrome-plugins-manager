(function(){document.title=chrome.i18n.getMessage("extName");var e=$("#showList");var c=$("#hideList");var b=$("#wrap");var j={3:228,4:304,5:380,6:456,7:532,8:608,9:684};
b.width(j[localStorage.getItem("_showColumn_")]);var h=localStorage.getItem("_showIconSize_")||2;b.addClass("icon-size-"+h);function d(){var k=g();chrome.management.getAll(function(s){var l=[];
var t=[];var m=[];for(var o=0;o<s.length;o++){var n=s[o];if(n.id===chrome.app.getDetails().id||n.type==="theme"){continue;}var p="";if(n.icons){p=n.icons[n.icons.length-1].url;
}var q="";var v=n.name;if(k&&k[n.id]==1){q="locked";v="「已锁定」"+v;}var r='<li data-id="'+n.id+'" title="'+v+'" data-optionurl="'+n.optionsUrl+'" alt="'+n.name+'" style="background-image:url('+p+')" '+q+"></li>";
if(n.enabled===false){m.push(r);}else{if(q==="locked"){t.unshift(r);}else{l.push(r);}}}if(!localStorage.getItem("_switch_rank_sort_")){l.sort(function(w,x){return i.get($(x).data("id"))-i.get($(w).data("id"));
});m.sort(function(w,x){return i.get($(x).data("id"))-i.get($(w).data("id"));});}var u=t.concat(l);e.html(u.join(""));if(m.length===0){e.addClass("hideListIsNull");
if(u.length===0){b.addClass("allListIsEmpty");}}c.html(m.join(""));a();});}d();function a(){if(!localStorage.getItem("_switch_show_badge_")){var l=g();
var k=0;$("#showList li").each(function(m,n){var o=$(n).data("id");if(l[o]!=="1"){k++;}});if(k===0){chrome.browserAction.setBadgeText({text:""});}else{chrome.browserAction.setBadgeBackgroundColor({color:"#f44336"});
chrome.browserAction.setBadgeText({text:k+""});}}}var i={_key:"_rankList_",_getLocalStorage:function(){var l=localStorage.getItem(this._key),k=null;if(l){k=JSON.parse(l);
return k;}else{return{};}},_setLocalStorage:function(k){localStorage.setItem(this._key,JSON.stringify(k));},get:function(l){var k=this._getLocalStorage();
if(k&&k[l]){return parseInt(k[l]);}else{return 0;}},setRank:function(m){var k=this._getLocalStorage();if(k){var l=k[m];if(l){k[m]=parseInt(k[m])+1;}else{k[m]=1;
}this._setLocalStorage(k);}}};b.on("click","li",function(){var l=$(this),m=l.data("id"),k=l.closest("#hideList").length===1;if(m){if(k){e.append(l);i.setRank(m);
}else{c.append(l);}if(c.find("li").length===0){e.addClass("hideListIsNull");}else{e.removeClass("hideListIsNull");}chrome.management.setEnabled(m,k,function(){});
}a();});b.on("mouseenter","li",function(){var k=$(this);window["timer_"+k.data("id")]=setTimeout(function(){k.addClass("hover");},100);}).on("mouseleave","li",function(){var k=$(this);
k.removeClass("hover");clearTimeout(window["timer_"+k.data("id")]);});function g(){var k=localStorage.getItem("_lockList_");if(k){return JSON.parse(k);
}else{return null;}}$("body").on("dblclick",function(){var k=e.find("li");k.each(function(l,n){var m=$(n);var o=m.data("id");if(m.attr("locked")===""){return;
}c.append(m);chrome.management.setEnabled(o,false,function(){});});chrome.browserAction.setBadgeText({text:""});});if(!localStorage.getItem("_switch_right_click_")){var f=localStorage.getItem("_rightClick_")||"uninstall";
$(document).on("mousedown","#hideList>li, #showList>li",function(l){if(l.button===2){if(f=="uninstall"){chrome.management.uninstall($(this).data("id"),function(){d();
});}else{if(f=="lock"){}else{if(f=="option"){var k=$(this).data("optionurl");if(k){window.open(k);}}}}}});}$(document).on("contextmenu",function(k){return false;
});})();